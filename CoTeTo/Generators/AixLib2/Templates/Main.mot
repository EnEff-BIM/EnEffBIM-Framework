<%
 strEmp = str()
 punCom = ','
 punSem = ';'
 punQuo = '"'
 punSpa = ' '
 punLin = '\n'
 parOpe = '('
 parClo = ')'
 braOpe = '['
 braClo = ']'
%>
within ;
model Test "just testing"

% for hvac_component in MapProject.buildings[0].hvac_components_mod:
  ${hvac_component.target_location} ${hvac_component.target_name}(
  % for param in hvac_component.parameters:
    ${param.name}=${param.value}${punCom if not loop.last else strEmp}
  % endfor
    ) "${hvac_component.sim_ref_id}"
    annotation (Placement(transformation(extent={{-10,-10},{10,10}})));

% endfor

equation
% for conny in MapProject.connections:
  connect(${conny.connector_a.parent.target_name}.${conny.connector_a.name}, ${conny.connector_b.parent.target_name}.${conny.connector_b.name})
    annotation (Line());
% endfor

annotation(
  Documentation(
    info="<html>
        used xml file was ${MapProject.simxml_file}
      </html>")
);

end Test;
