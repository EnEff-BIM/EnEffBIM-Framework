package ${static_data.project_name}
extends Modelica.Icons.Package;
	model ${static_data.project_name}${static_data.used_library}
	
	%for bldg in static_data.buildings:
	
%for comp in bldg.supply_components:
${comp.target_location} ${comp.target_name}(
%for param in comp.parameters:
%if type(param).__name__ == "MappedProperty":
${param.name} = ${param.value}\
${',' if not loop.last else ''}\
%else:
${param.name} = ${param.record_location}(\
%for param_rec in param.parameters:
${param_rec.name} = ${param_rec.value}\
${',' if not loop.last else ')'}\
${',' if not loop.parent.last else ''}\
%endfor
%endif
${'' if not loop.last else ');'}
%endfor
%endfor
%for zone in bldg.thermal_zones:
%for comp in zone.supply_components:
${comp.target_location} ${comp.target_name}(
%for param in comp.parameters:
%if type(param).__name__ == "MappedProperty":
${param.name} = ${param.value}\
${',' if not loop.last else ''}\
%else:
${param.name} = ${param.record_location}(\
%for param_rec in param.parameters:
${param_rec.name} = ${param_rec.value}\
${',' if not loop.last else ')'}\
${',' if not loop.parent.last else ''}\
%endfor
%endif
%endfor
${'' if not loop.last else ');'}
%endfor
%endfor

%endfor
equation
%for con in static_data.connections:
connect(${con.connector_a.parent_class.target_name}.${con.connector_a.name},${con.connector_b.parent_class.target_name}.${con.connector_b.name});
%endfor
end ${static_data.project_name}${static_data.used_library};